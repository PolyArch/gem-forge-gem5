Import('*')

DebugFlag('GemForgeCPUDump')
DebugFlag('LLVMTraceCPU')
DebugFlag('LLVMTraceCPUFetch')
DebugFlag('LLVMTraceCPUCommit')
DebugFlag('LLVMBranchPredictor')
DebugFlag('GemForgeLoadStoreQueue')
DebugFlag('RegionStats')

if not env['HAVE_PROTOBUF']:
    print('Require protobuf')
    assert False

ProtoBuf('TDGInstruction.proto')

SimObject('LLVMTraceCPU.py')
Source('bank_manager.cc')
Source('tdg_packet_handler.cc')
Source('region_stats.cc')
Source('llvm_insts.cc')
Source('dyn_inst_stream.cc')
Source('thread_context.cc')
Source('llvm_trace_cpu.cc')
Source('llvm_trace_cpu_driver.cc')
Source('llvm_fetch_stage.cc')
Source('llvm_decode_stage.cc')
Source('llvm_rename_stage.cc')
Source('llvm_iew_stage.cc')
Source('llvm_commit_stage.cc')
Source('llvm_branch_predictor.cc')
Source('lsq.cc')
